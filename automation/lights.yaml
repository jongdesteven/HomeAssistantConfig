# Carport
- id: automation_6a
  alias: Carport lights on at sunset
  trigger:
    platform: sun
    event: sunset
  action:
  - service: light.turn_on
    data:
      entity_id: light.carport
  - service: light.turn_on
    entity_id: light.lamp_voordeur
- id: automation_6b
  alias: Carport lights off at sunrise
  trigger:
    platform: sun
    event: sunrise
  action:
  - service: light.turn_off
    entity_id: light.carport, light.lamp_voordeur

# Emergency alle lampen aan / uit
- id: automation_11
  alias: All indoor lights off when holding off button
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_dimmer_switch_2, sensor.woonkamer_dimmer_switch_1
    to: 4_hold
  action:
  - service: light.turn_off
    entity_id:
    - light.keuken
    - light.lamp_keukeneiland
    - light.slaapkamer
    - light.woonkamer
    - light.overloop
    - light.tuinkamer
    - light.kartent
- id: automation_12
  alias: All indoor lights bright on when holding buttons
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_dimmer_switch_2, sensor.woonkamer_dimmer_switch_1
    to: 1_hold
  action:
  - service: light.turn_on
    entity_id:
    - light.slaapkamer
    - light.keuken
    - light.lamp_keukeneiland
    - light.woonkamer
    - light.overloop
    - light.tuinkamer
    - light.kartent
    data:
      brightness: 254
      color_temp: 200

# Leaving house
- id: automation_13a
  alias: leaving in daylight, lights off
  trigger:
    platform: state
    entity_id: group.family
    to: not_home
  condition:
    condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: -6.0 #0 to -6 is dusk
  action:
  - service: light.turn_off
    entity_id:
    - light.slaapkamer
    - light.woonkamer
    - light.badkamer
    - light.keuken
    - light.lamp_keukeneiland
    - light.overloop
    - light.tuinkamer
    - light.kartent
- id: automation_13b
  alias: coming home in darkness, lights on
  trigger:
    platform: state
    entity_id: group.family
    to: home
  condition:
    condition: state
    entity_id: sun.sun
    state: 'below_horizon'
  action:
    - service: script.lights_during_day
- id: automation_13c
  alias: Woonkamer on at sunset when not home
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: 0.0 #0 to -6 is dusk
  condition:
    condition: state
    entity_id: group.family
    state: not_home
  action:
    - service: script.verlichting_niet_thuis

- id: automation_13d
  alias: All off at sunrise when not home
  trigger:
    platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: -4.0 #0 to -6 is dusk
  condition:
    condition: state
    entity_id: group.family
    state: not_home
  action:
  - service: light.turn_off #all off

- id: automation_13e
  alias: All off at night when not home
  trigger:
    platform: time
    at: "22:30:00"
  condition:
    condition: state
    entity_id: group.family
    state: not_home
  action:
  - service: light.turn_off
    entity_id:
    - light.slaapkamer
    - light.keuken
    - light.badkamer
    - light.lamp_keukeneiland
    - light.woonkamer
    - light.overloop
    - light.tuinkamer
    - light.kartent

# Woonkamer remote
- id: automation_20a
  alias: Turn On other lights with hue woonkamer remote
  trigger:
  - entity_id: sensor.woonkamer_dimmer_switch
    platform: state
    to: 1_click_up
  action:
  - entity_id: light.lamp_keukeneiland, light.tuinkamer
    service: light.turn_on
  - service: light.turn_on
    data:
      entity_id: light.kartent
      white_value: 100
    #- service: switch.turn_on
    #entity_id: switch.kerstboom
- id: automation_20b
  alias: Turn Off other lights with woonkamer hue remote
  trigger:
  - entity_id: sensor.woonkamer_dimmer_switch
    platform: state
    to: 4_click_up
  action:
  - entity_id: light.lamp_keukeneiland, light.tuinkamer, light.kartent
    service: light.turn_off
    #  - service: switch.turn_off
    #entity_id: switch.kerstboom

# Slaapkamer
- id: automation_lights_21a
  alias: Slaapkamer lights on with bed button
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_onoff_button_action
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.slaapkamer
    data_template:
      brightness: "{% if now().hour < 22 and now().hour >= 6 %} 25 {% else %} 1 {% endif %}" 
      color_temp: "{% if now().hour < 22 and now().hour >= 6 %} 370 {% else %} 500 {% endif %}" # Bright and  Nightlight imitation 2700K & 2000K  
- id: automation_lights_21b
  alias: Slaapkamer lights off with bed button
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_onoff_button_action
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.slaapkamer, light.overloop
# slaapkamer brightness up
- id: automation_lights_22a
  alias: Slaapkamer brightness change up
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_onoff_button_action
    to: 'brightness_move_up'
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.slaapkamer_light_change
  - service: script.light_slaapkamer_brightness_change
    data:
      speed_ms: 200
      step_pct: 10

# slaapkamer brightness down
- id: automation_lights_22b
  alias: Slaapkamer brightness change down
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_onoff_button_action
    to: 'brightness_move_down'
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.slaapkamer_light_change
  - service: script.light_slaapkamer_brightness_change
    data:
      speed_ms: 200
      step_pct: -10
# slaapkamer stop
- id: automation_lights_22c
  alias: Slaapkamer brightness change stop
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_onoff_button_action
    to: 'brightness_stop'
  - platform: state
    entity_id: input_boolean.slaapkamer_light_change
    to: 'on'
    for:
      seconds: 5
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.slaapkamer_light_change

# Slaapkamer Hannah
- id: automation_lights_23
  alias: Slaapkamer Hannah lights on with bed button
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_hannah_button_action
    to: 'on'
  action:
  - service: light.turn_on
    data_template:
      entity_id: >
        {% if is_state('light.slaapkamer_hannah2_light', 'on') %}
        light.slaapkamer_hannah3_light
        {% elif is_state('light.slaapkamer_hannah1_light', 'on') %}
        light.slaapkamer_hannah2_light 
        {% else %}
        light.slaapkamer_hannah1_light
        {% endif %}
- id: automation_lights_24
  alias: Slaapkamer Hannah lights off with bed button
  trigger:
  - platform: state
    entity_id: sensor.slaapkamer_hannah_button_action
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.slaapkamer_hannah1_light, light.slaapkamer_hannah2_light, light.slaapkamer_hannah3_light

# Kartent
- id: automation_lights_24a
  alias: Kartent lights switch single
  trigger:
  - platform: state
    entity_id: sensor.kartent_button_action
    to: 'single' #'double' 'long'
  action:
  - service: light.turn_on
    data:
      entity_id: light.kartent
      hs_color: [ "{{range(0,360) | random}}", 75 ] #random color(hue)

- id: automation_lights_24b
  alias: Kartent lights switch long
  trigger:
  - platform: state
    entity_id: sensor.kartent_button_action
    to: 'double' # 'single' double' 'long'
  action:
  - service: light.turn_on
    data:
      entity_id: light.kartent
      brightness: 255
      color_name: "red"
  - delay:
      milliseconds: 500
  - service: light.turn_on
    data:
      entity_id: light.kartent
      effect: "{{range(2,4) | random}}" #random effect

- id: automation_lights_24c
  alias: Kartent lights switch long
  trigger:
  - platform: state
    entity_id: sensor.kartent_button_action
    to: 'long' # 'single' double' 'long'
  action:
  - service: light.turn_on
    data:
      entity_id: light.kartent
      white_value: 200

- id: automation_lights_24d
  alias: Reset kartents lights after 2 minutes
  trigger:
    - platform: state
      entity_id: light.kartent
      attribute: white_value
      to: 0
      for:
        seconds: 30
    - platform: state
      entity_id: light.kartent
      attribute: effect
      from: 0
      for:
        seconds: 30
  action:
    - service: light.turn_on
      data:
        entity_id: light.kartent
        white_value: 100
